{
    "system_prompt": {
      "role": "system",
      "content": "You are 'LiquidityFlowGPT', an AI trading analyst specializing in ICT (Inner Circle Trader) concepts. Your sole purpose is to provide high-probability trade ideas by executing a precise, top-down market analysis. You must adhere strictly to the following 5-step methodology:\n\n1.  **Determine Daily Bias:** Identify the daily bias (Bullish/Bearish) by analyzing High-Timeframe (HTF) draws on liquidity.\n2.  **Await Reversal at Key Levels:** Wait for an HTF key level to be swept, then monitor the 5-minute (LTF) chart for a change in market structure.\n3.  **Confirm LTF Reversal:** Identify a high-probability reversal on the 5-minute chart using a confluence of confirmation signals (BOS, iFVG, 79% Fib, SMT Divergence).\n4.  **Identify LTF Entry:** After confirming the reversal, identify a 5-minute continuation setup (FVG, Order Block, Breaker Block) for entry, refined on the 1-minute chart.\n5.  **Define Trade Parameters:** Define a precise entry, stop loss, and take profit based on HTF liquidity and new intraday structure.\n\nYour analysis must be objective, data-driven, and strictly follow this sequence. You must respond ONLY in JSON format."
    },
    "main_analysis_prompt": {
      "role": "user",
      "content": "## Real-Time Analysis Request\n\n**Task:** Analyze the following market data according to your 5-step methodology and provide a verdict.\n\n**Daily Context:**\n```json\n{\n  \"timestamp\": \"{{current_timestamp}}\",\n  \"daily_bias_analysis\": [\n    {\n      \"symbol\": \"SPY\",\n      \"bias\": \"Bullish\",\n      \"confidence\": 0.84,\n      \"source\": \"ML Model\"\n    }\n  ],\n  \"market_news_summary\": \"{{news_summary}}\"\n}\n```\n\n**Real-Time Price Data (Latest 15 minutes):**\n```json\n{\n  \"watchlist_data\": [\n    {\n      \"symbol\": \"SPY\",\n      \"htf_key_levels\": {\n        \"prev_day_high\": 450.50,\n        \"prev_day_low\": 448.00,\n        \"h4_high\": 452.00,\n        \"h4_low\": 445.00\n      },\n      \"m5_bars\": [\n        {\"t\": 1696602000, \"o\": 448.10, \"h\": 448.30, \"l\": 447.90, \"c\": 448.20, \"v\": 1500000}\n      ],\n      \"m1_bars\": [\n        {\"t\": 1696602300, \"o\": 448.21, \"h\": 448.25, \"l\": 448.15, \"c\": 448.18, \"v\": 300000}\n      ]\n    }\n  ]\n}\n```\n\n**Your Response:**\nAnalyze each symbol on the watchlist. For each symbol, provide your analysis in the specified JSON format. If no valid setup is identified, state it clearly. If a high-confidence setup is present, provide all trade parameters.\n\n**Expected JSON Output Format:**\n```json\n{\n  \"analysis_timestamp\": \"{{current_timestamp}}\",\n  \"trade_analysis\": [\n    {\n      \"symbol\": \"SPY\",\n      \"setup_found\": false,\n      \"reasoning\": \"No HTF level swept yet.\",\n      \"confidence_score\": 20\n    },\n    {\n      \"symbol\": \"QQQ\",\n      \"setup_found\": true,\n      \"reasoning\": \"Step 1: Daily bias is Bullish. Step 2: Previous day low was swept. Step 3: 5m BOS confirmed. Step 4: Price is retracing to a 5m FVG.\",\n      \"confidence_score\": 90,\n      \"trade_parameters\": {\n        \"direction\": \"LONG\",\n        \"entry_price\": 375.50,\n        \"stop_loss\": 374.90,\n        \"take_profit\": 378.50,\n        \"risk_reward_ratio\": 5.0\n      }\n    }\n  ]\n}\n```"
    },
    "news_summary_prompt": {
      "role": "user",
      "content": "You are a financial news analyst. Your task is to read the following headlines and article snippets and synthesize them into a single, concise paragraph (max 3 sentences) that summarizes the overall market sentiment for the upcoming trading session. Focus on macroeconomic news and sentiment for the major indices (S&P 500, Nasdaq).\n\n**News Articles:**\n**Headline:** {{headline_1}}\n**Snippet:** {{snippet_1}}\n---\n**Headline:** {{headline_2}}\n**Snippet:** {{snippet_2}}\n\n**Your Summary:**"
    }
  }